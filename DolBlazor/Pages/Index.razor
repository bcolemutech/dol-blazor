@page "/"
@using dol_sdk.Services
@inject ISecurityService Security
@inject NavigationManager NavigationManager
@inject IJSRuntime JS

<div class="container">
    <div class="row">
        <img alt="Dominion of Light" src="Images/cooltext387066746551592.png" class="col">
    </div>
    <div class="row">
        @if (Security.Identity is not null && !Security.Identity.IsExpired())
        {
            <div class="col-lg-6 col-md-12 card">
                <div class="card-header">
                    <h2>Characters</h2>
                </div>
                <div class="card-body">
                    Select you character
                </div>
            </div>
            <div class="col-lg-6 col-md-12 card">
                <div class="card-header">
                    <h2>Settings</h2>
                </div>
                <div class="card-body">
                    -----
                </div>
            </div>
        }
        else
        {
            <div class="col">
                <h3>Log in <a href="/Login?returnUrl=">here</a></h3>
            </div>
        }
    </div>
</div>

@code
{
    // protected override async Task OnAfterRenderAsync(bool firstRender)
    // {
    //     await base.OnAfterRenderAsync(firstRender);
    //     var unauthenticated = Security.Identity is not null && !Security.Identity.IsExpired();
    //     if (unauthenticated) return;
    //
    //     var uri = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
    //     NavigationManager.NavigateTo($"/login?returnUrl={Uri.EscapeDataString(uri)}");
    // }
}